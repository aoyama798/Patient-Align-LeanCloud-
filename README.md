# 创二患者看板系统（Patient Board）

一个基于 **LeanCloud + 原生 HTML/CSS/JavaScript** 实现的轻量级患者看板系统，用于科室内研究生**在院患者管理、床位汇总、规培医生分组展示与出院管理**。

---

## 一、系统定位与设计目标

### 🎯 设计目标

* 快速记录与查看 **在院患者**
* 按 **医生维度** 可视化管理患者
* 支持 **备注 / 待办事项**
* 支持 **出院 / 删除 / 重新标记最新**
* 无需后端服务器，**浏览器即用**
* 适合病房、护士站、医生办公室大屏或个人使用

### 🧠 适用场景

* 骨科 / 外科 / 内科病房研究生患者管理
* 床位快速浏览
* 研究生临床工作中的轻量级信息提醒

---

## 二、核心功能总览

### 1️⃣ 患者新增

* 输入：

  * 病人姓名（支持“床号 + 姓名”）
  * 负责医生
  * 备注 / 诊断 / 待办事项
* 新增后：

  * **立即显示在对应医生列**
  * 自动计入在院人数
  * 显示在床位列表
  * 默认标记为「在院」

---

### 2️⃣ 医生分组看板（核心视图）

* 每位医生一个独立列
* 患者以卡片形式展示
* 卡片内容包括：

  * 病人姓名
  * 备注（若存在）
* 支持：

  * 点击患者卡片 → 编辑
  * 拖拽患者 → 出院 / 删除

---

### 3️⃣ 最新患者高亮显示

* **最近一次新增 / 手动标记为最新的患者**
* 整个患者卡片背景呈 **粉色高亮**
* 用于：

  * 提醒最新收治病人
  * 快速定位重点患者

---

### 4️⃣ 患者编辑模态框（点击患者）

支持在弹窗中进行完整操作：

* ✏️ 修改姓名
* 📝 修改备注（与卡片实时互通）
* 👨‍⚕️ 重新分配医生
* 🆕 手动标记为“最新收治患者”
* 📤 出院
* 🗑 删除

> 出院患者不可再次标记为“最新”

---

### 5️⃣ 手动标记为“最新患者”

* 模态框内提供专用按钮
* 功能：

  * 强制将该患者的时间更新为当前时间
  * 覆盖“最近一次新增”的高亮逻辑
* 适用于：

  * 转入病房
  * 重点关注患者
  * 临床流程变更

---

### 6️⃣ 出院管理

#### 出院方式

* 模态框内点击「出院」
* 或拖拽患者卡片至「出院区」

#### 出院后效果

* 患者状态标记为 `discharged = true`
* 不再显示在「在院」视图
* 可在「出院」视图中查看
* 在床位统计中自动移除

---

### 7️⃣ 床位列表与在院统计

底部自动生成：

* **在院床位列表（a~z / 床号优先排序）**
* **当前在院患者总人数**

排序规则：

1. 优先识别床号（如 `12张三`）
2. 按床号数值排序
3. 无床号者排后
4. 同级按中文拼音排序

---

### 8️⃣ 医生管理

* 点击医生列标题 → 编辑医生
* 支持：

  * 修改医生姓名
  * 调整医生展示顺序（用 `-` 分隔）
  * 删除医生及其所有患者（二次确认）

---

### 9️⃣ 视图切换

右上角按钮：

* **在院**：仅显示未出院患者
* **出院**：仅显示已出院患者

---

## 三、数据与技术实现

### 🔧 技术栈

* HTML5 / CSS3
* 原生 JavaScript（无框架）
* LeanCloud 作为云端数据库

### ☁️ 云端数据表

#### patients

| 字段名         | 说明     |
| ----------- | ------ |
| name        | 病人姓名   |
| doctor      | 负责医生   |
| notes       | 备注     |
| discharged  | 是否出院   |
| createdAt   | 创建时间   |
| highlightAt | 手动高亮时间 |

#### doctorsOrder

* 保存医生展示顺序（字符串）

---

### 🔐 权限说明

* 公共读写（适合内部使用）
* 无登录系统
* 建议仅在可信环境使用

---

## 四、交互设计亮点

* 新增 / 编辑后 **无需刷新页面**
* 所有操作即时同步云端
* 二次确认防误操作（出院 / 删除）
* 响应式布局，支持平板 / 大屏

---

## 五、已实现 & 可扩展方向

### ✅ 已实现

* 在院 / 出院完整闭环
* 医生维度管理
* 床位自动统计
* 最新患者高亮
* 云端持久化

### 🔧 可扩展

* 登录 / 权限控制
* 手术日期 / 标签系统
* 夜班 / 值班模式
* HIS 数据接口对接
* 导出 Excel / PDF

---

## 六、作者

**© Aoyama798**
·临床骨科医生
